var c=Object.defineProperty;var p=(t,a,e)=>a in t?c(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e;var s=(t,a,e)=>p(t,typeof a!="symbol"?a+"":a,e);import"./react-C6px0Wgw.js";import l from"./html2canvas-CBrSDip1.js";import{E as m}from"./jspdf-DmGXxvMQ.js";var i=3.77952755906,M=(t=>(t[t.LOW=1]="LOW",t[t.NORMAL=2]="NORMAL",t[t.MEDIUM=3]="MEDIUM",t[t.HIGH=7]="HIGH",t[t.EXTREME=12]="EXTREME",t))(M||{}),u=(t=>(t[t.NONE=0]="NONE",t[t.SMALL=5]="SMALL",t[t.MEDIUM=10]="MEDIUM",t[t.LARGE=25]="LARGE",t))(u||{}),r={method:"save",resolution:3,page:{margin:0,format:"A4",orientation:"portrait"},canvas:{mimeType:"image/jpeg",qualityRatio:1,useCORS:!0,logging:!1},overrides:{}},d=class{constructor(t,a){s(this,"pdf");s(this,"canvas");s(this,"options");var e;this.canvas=t,this.options=a,this.pdf=new m({format:this.options.page.format,orientation:this.options.page.orientation,...(e=this.options.overrides)==null?void 0:e.pdf,unit:"mm"})}getMarginTopMM(){const t=typeof this.options.page.margin=="object"?this.options.page.margin.top:this.options.page.margin;return Number(t)}getMarginLeftMM(){const t=typeof this.options.page.margin=="object"?this.options.page.margin.left:this.options.page.margin;return Number(t)}getMarginRightMM(){const t=typeof this.options.page.margin=="object"?this.options.page.margin.right:this.options.page.margin;return Number(t)}getMarginBottomMM(){const t=typeof this.options.page.margin=="object"?this.options.page.margin.bottom:this.options.page.margin;return Number(t)}getMarginTop(){return this.getMarginTopMM()*i}getMarginBottom(){return this.getMarginBottomMM()*i}getMarginLeft(){return this.getMarginLeftMM()*i}getMarginRight(){return this.getMarginRightMM()*i}getScale(){return this.options.resolution}getPageHeight(){return this.getPageHeightMM()*i}getPageHeightMM(){return this.pdf.internal.pageSize.height}getPageWidthMM(){return this.pdf.internal.pageSize.width}getPageWidth(){return this.getPageWidthMM()*i}getOriginalCanvasWidth(){return this.canvas.width/this.getScale()}getOriginalCanvasHeight(){return this.canvas.height/this.getScale()}getCanvasPageAvailableHeight(){return this.getPageAvailableHeight()*this.getScale()*this.getHorizontalFitFactor()}getPageAvailableWidth(){return this.getPageWidth()-(this.getMarginLeft()+this.getMarginRight())}getPageAvailableHeight(){return this.getPageHeight()-(this.getMarginTop()+this.getMarginBottom())}getPageAvailableWidthMM(){return this.getPageAvailableWidth()/i}getPageAvailableHeightMM(){return this.getPageAvailableHeight()/i}getNumberPages(){return Math.ceil(this.canvas.height/this.getCanvasPageAvailableHeight())}getHorizontalFitFactor(){return this.getPageAvailableWidth()<this.getOriginalCanvasWidth()?this.getOriginalCanvasWidth()/this.getPageAvailableWidth():1}getCanvasOffsetY(t){return this.getCanvasPageAvailableHeight()*(t-1)}getCanvasHeightLeft(t){return this.canvas.height-this.getCanvasOffsetY(t)}getCanvasPageHeight(t){if(this.canvas.height<this.getCanvasPageAvailableHeight())return this.canvas.height;const a=this.getCanvasHeightLeft(t);return a<this.getCanvasPageAvailableHeight()?a:this.getCanvasPageAvailableHeight()}getCanvasPageWidth(){return this.canvas.width}createCanvasPage(t){const a=this.getCanvasPageWidth(),e=this.getCanvasPageHeight(t),g=document.createElement("canvas");return g.setAttribute("width",String(a)),g.setAttribute("height",String(e)),g.getContext("2d").drawImage(this.canvas,0,this.getCanvasOffsetY(t),this.canvas.width,e,0,0,this.canvas.width,e),g}convert(){let t=1;const a=this.getNumberPages();for(;t<=a;){t>1&&this.pdf.addPage(this.options.page.format,this.options.page.orientation);const e=this.createCanvasPage(t),g=e.toDataURL(this.options.canvas.mimeType,this.options.canvas.qualityRatio);this.pdf.setPage(t),this.pdf.addImage({imageData:g,width:e.width/(this.getScale()*i*this.getHorizontalFitFactor()),height:e.height/(this.getScale()*i*this.getHorizontalFitFactor()),x:this.getMarginLeftMM(),y:this.getMarginTopMM()}),t+=1}return this.pdf}},P=t=>t?{...r,...t,canvas:{...r.canvas,...t.canvas},page:{...r.page,...t.page}}:r,f=t=>typeof t=="function"?t():t==null?void 0:t.current,b=async(t,a)=>{var o;const e=P(a),g=f(t);if(!g){console.error("Unable to get the target element.");return}const h=await l(g,{useCORS:e.canvas.useCORS,logging:e.canvas.logging,scale:e.resolution,...(o=e.overrides)==null?void 0:o.canvas}),n=new d(h,e).convert();switch(e.method){case"build":return n;case"open":return window.open(n.output("bloburl"),"_blank"),n;case"save":default:{const v=e.filename??`${new Date().getTime()}.pdf`;return await n.save(v,{returnPromise:!0}),n}}},w=b;export{u as M,M as R,w as i};
