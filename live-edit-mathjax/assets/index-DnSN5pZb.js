import{r as i,j as e,R as q}from"./react-C6px0Wgw.js";import{c as S}from"./react-dom-CqplBXsJ.js";import{E as T,D as N,a as C,T as E,S as A,b as R,c as b,P as M}from"./primereact-BqNsrbpI.js";import{M as y,a as L}from"./better-react-mathjax-BWUlTwSj.js";import{M as D,R as I,i as O}from"./react-to-pdf-BR_mTDuS.js";/* empty css                   */import"./quill-DPWaex59.js";import"./core-js-Du5Ijri-.js";import"./scheduler-BNqrtbQi.js";import"./jspdf-DmGXxvMQ.js";import"./@babel-eMBO4PkQ.js";import"./fflate-XZmX483V.js";import"./fast-png-DT7t28n9.js";import"./iobuffer-DZ1zOcUT.js";import"./pako-n3Pgozwg.js";import"./react-transition-group-7DzU9Q_2.js";import"./dom-helpers-D0mFdbeO.js";import"./html2canvas-CBrSDip1.js";import"./parchment-DI0xVRB_.js";import"./quill-delta-CpMQf48A.js";import"./fast-diff-BGhgD5-Y.js";import"./lodash.clonedeep-DQXe9fFo.js";import"./lodash.isequal-5T5nhgtP.js";import"./eventemitter3-BoQRRvOf.js";import"./lodash-es-BvFElN8u.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function o(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(t){if(t.ep)return;t.ep=!0;const a=o(t);fetch(t.href,a)}})();const P=i.memo(({quillRef:s,onChangeEditor:r})=>{const o=t=>{s&&(s.current=t)},l=t=>{r(t)};return e.jsx(T,{className:"flex-1 flex flex-col",onLoad:o,value:'<p class="ql-align-right ql-direction-rtl"></p>',modules:{toolbar:"[id='quilToolbar']"},headerTemplate:k,onTextChange:l})}),k=e.jsx("div",{id:"quilToolbar",onClick:()=>{},children:e.jsxs("div",{id:"toolbar-container",children:[e.jsxs("span",{className:"ql-formats",children:[e.jsxs("select",{className:"ql-font",defaultValue:"IRANSansX",children:[e.jsx("option",{value:"IRANSansX"}),e.jsx("option",{value:"serif"}),e.jsx("option",{value:"monospace"})]}),e.jsx("select",{className:"ql-size"})]}),e.jsxs("span",{className:"ql-formats",children:[e.jsx("button",{className:"ql-bold"}),e.jsx("button",{className:"ql-italic"}),e.jsx("button",{className:"ql-underline"}),e.jsx("button",{className:"ql-strike"})]}),e.jsxs("span",{className:"ql-formats",children:[e.jsx("select",{className:"ql-color"}),e.jsx("select",{className:"ql-background"})]}),e.jsxs("span",{className:"ql-formats",children:[e.jsx("button",{className:"ql-script",value:"sub"}),e.jsx("button",{className:"ql-script",value:"super"})]}),e.jsxs("span",{className:"ql-formats",children:[e.jsx("button",{className:"ql-header",value:"1"}),e.jsx("button",{className:"ql-header",value:"2"}),e.jsx("button",{className:"ql-blockquote"}),e.jsx("button",{className:"ql-code-block"})]}),e.jsxs("span",{className:"ql-formats",children:[e.jsx("button",{className:"ql-list",value:"ordered"}),e.jsx("button",{className:"ql-list",value:"bullet"}),e.jsx("button",{className:"ql-indent",value:"-1"}),e.jsx("button",{className:"ql-indent",value:"+1"})]}),e.jsxs("span",{className:"ql-formats",children:[e.jsx("button",{className:"ql-direction",value:"rtl"}),e.jsxs("select",{className:"ql-align",children:[e.jsx("option",{value:""}),e.jsx("option",{value:"center"}),e.jsx("option",{value:"right"}),e.jsx("option",{value:"justify"})]})]})]})}),V=i.memo(({visible:s,setVisible:r,appQuill:o,CodeTemplate:l,setCodeTemplate:t})=>{const a=l,d=n=>()=>{t(l.filter(m=>m.id!==n.id)),console.log("remove",n)},u=n=>()=>{o==null||o.insertText(o==null?void 0:o.getSelection(!0).index,n.code),r(!1)},p=n=>e.jsx(q.Fragment,{children:[1].map(m=>e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between items-center border-1 border-purple-300 shadow-md rounded-lg h-full",children:[e.jsx("div",{className:"m-2",children:e.jsxs(y,{dynamic:!0,children:["$",n.code,"$"]})}),e.jsxs("div",{className:"flex flex-col justify-between items-center h-full",children:[e.jsx("i",{className:"pi pi-check text-blue-500 hover:cursor-pointer hover:bg-blue-100 rounded-full p-2",onClick:u(n)}),e.jsx("i",{className:"pi pi-trash text-red-500 hover:cursor-pointer hover:bg-red-100 rounded-full p-2",onClick:d(n)})]})]})},m))},n.id),h=n=>p(n),j=n=>e.jsx("div",{className:"flex flex-wrap gap-1",children:n.map(m=>h(m))});return e.jsx(N,{header:"add equalition",visible:s,className:"w-[90vw] md:w-[80vw] xl:w-[70vw]",onHide:()=>{s&&r(!1)},children:e.jsx("div",{className:"",children:e.jsx(C,{value:a,listTemplate:j,emptyMessage:"0 Template available"})})})}),F=i.memo(({visible:s,setVisible:r})=>e.jsx(N,{header:"add equalition",visible:s,className:"w-[90vw] md:w-[80vw] xl:w-[70vw]",onHide:()=>{s&&r(!1)},children:e.jsx("div",{className:"rounded-lg flex justify-center",children:e.jsx("div",{children:"nothing here for now"})})})),$=i.memo(({appQuill:s,setting:r,setSetting:o,previewDiv:l})=>{const[t,a]=i.useState({CodeTemplate:[]}),d=i.useRef(null),[u,p]=i.useState(!1),[h,j]=i.useState(!1),n=i.useRef(null),m=[{label:"Add",icon:"pi pi-code",command:()=>{p(!0)}},{label:"Refresh",icon:"pi pi-refresh",command:()=>{s==null||s.setContents([])}},{label:"Save",icon:"pi pi-plus",command:()=>{const c=s==null?void 0:s.getText(s==null?void 0:s.getSelection());c&&c.trim()!==""&&(t.CodeTemplate=[...t.CodeTemplate,{id:new Date().toISOString(),code:c}])}},{label:"Expoer",icon:"pi pi-file-export",command:()=>{g(s==null?void 0:s.getText(),"output.txt","text/plain",".txt")}},{label:"Upload",icon:"pi pi-upload",command:()=>{B(".json",c=>{const f=new FileReader;f.readAsText(c,"UTF-8"),f.onloadend=w=>{var v;try{const x=JSON.parse((v=w.target)==null?void 0:v.result);Array.isArray(x)&&(a({...t,CodeTemplate:x}),n.current.show({severity:"success",summary:"import",detail:x.length+" Data Imported"}))}catch(x){n.current.show({severity:"error",summary:"import",detail:"error while Import"+x.message})}}})}},{label:"download",icon:"pi pi-download",command:async()=>{await g(JSON.stringify(t.CodeTemplate,null,2),"template.json","application/json",".json")}},{label:"saveAsPdf",icon:"pi pi-file-pdf",command:async()=>{J(l)}}];return i.useEffect(()=>{var c;((c=d.current)==null?void 0:c.getElement().getElementsByClassName("p-speeddial-button")[0]).onmouseenter=()=>{var f;(f=d.current)==null||f.show()}},[]),e.jsxs("div",{className:"fixed bottom-3 left-3",children:[e.jsxs("div",{children:[e.jsx(E,{ref:n,position:"top-left"}),e.jsx(A,{ref:d,onMouseLeave:()=>{var c;(c=d.current)==null||c.hide()},showIcon:"pi pi-pencil",hideIcon:"pi pi-times",model:m,radius:150,direction:"up",buttonClassName:"p-button-outlined",style:{left:0,bottom:0}})]}),e.jsx(V,{CodeTemplate:t.CodeTemplate,visible:u,setVisible:p,appQuill:s,setCodeTemplate:c=>{a({...t,CodeTemplate:c})}}),e.jsx(F,{setting:r,setSetting:o,CodeTemplate:t.CodeTemplate,visible:h,setVisible:j})]})});async function g(s,r,o,l){try{const a=await(await window.showSaveFilePicker({suggestedName:r,types:[{description:"Json File",accept:{[o]:[l]}}]})).createWritable();await a.write(s),await a.close()}catch(t){console.log(t)}}function B(s,r){const o=document.createElement("input");o.accept=s,o.style.display="none",o.type="file",o.addEventListener("change",()=>{o.files&&r(o.files[0])});const l=()=>{document.body.removeEventListener("focus",l,!0),setTimeout(()=>{document.body.removeChild(o)},1e3)};document.body.addEventListener("focus",l,!0),document.body.appendChild(o),o.click()}async function J(s){const r={method:"open",resolution:I.MEDIUM,page:{margin:D.SMALL,format:"A4",orientation:"portrait"},overrides:{pdf:{compress:!0},canvas:{useCORS:!0}}};O(s,{filename:"previewOfOutLatexPut.pdf",...r})}function H(){const[s,r]=i.useState({data:""}),[o,l]=i.useState({MatjaxVersion:"V3"}),t=i.useRef(null),a=i.useRef(null),d=u=>{s.data=u.htmlValue||"",r({...s})};return i.useEffect(()=>{},[]),e.jsxs("div",{className:"h-screen p-1 bg-gray-400 md:bg-sky-400 xl:bg-purple-400 flex flex-col",children:[e.jsxs(R,{className:"flex-1",children:[e.jsx(b,{className:"overflow-auto h-full  flex flex-col",children:e.jsxs("div",{children:[e.jsx("p",{dir:"rtl",className:"bg-sky-200 p-3 mt-1 rounded-md shadow-lg",children:"پیش نمایش"}),e.jsx("div",{ref:a,children:e.jsx(y,{dynamic:!0,children:e.jsx("div",{className:"ql-editor",dangerouslySetInnerHTML:{__html:s.data}})})})]})}),e.jsx(b,{className:"overflow-auto h-full",children:e.jsx(P,{quillRef:t,onChangeEditor:d})})]}),e.jsx($,{previewDiv:a,setting:o,setSetting:l,AppState:s,setAppState:r,appQuill:t.current})]})}const U={loader:{load:["[tex]/html","[tex]/unicode","[tex]/mathtools"]},chtml:{scale:1.3},tex:{packages:{"[+]":["html","unicode","mathtools"]},inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]}};S.createRoot(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(M,{children:e.jsx(L,{version:3,config:U,children:e.jsx(H,{})})})}));
